schema_version: 2.0.0
service_name: neutrino
service_type: custom
distribution: stretch
debian_packages_for_build:
  - name: python
  - name: default-jdk
  - name: maven
  - name: sudo
  - name: wget
  - name: netcat
  - name: ubermon
  - name: apache2-utils
debian_packages_for_runtime:
  - name: python
  - name: default-jdk
  - name: maven
  - name: sudo
  - name: wget
  - name: netcat
  - name: ubermon
  - name: apache2-utils
custom:
  build_cmds:
      # Assuming that the tests are already passing, the rest of exclusions are because of the super old
      # maven version 3.3.9 in the base debian image
    - RUN mvn clean install -TC1 -DskipTests -Dmaven.javadoc.skip=true -Dair.check.skip-dependency=true
    - RUN chown -R udocker:udocker /home/udocker/neutrino
applications:
  - udeploy_app_id: 'neutrino'
    app_type: command_line
    health_check: neutrino/udeploy_health_check.sh
    command_line:
      run_cmd: './neutrino/start.sh presto-server/target/presto-server-0.218-SNAPSHOT'

